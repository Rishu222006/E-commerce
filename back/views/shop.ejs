<%- include('./partials/header') %>
    <style>
        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fade-in 0.4s ease-out;
        }
    </style>

    <% if (success && success.length> 0) { %>
        <div
            class="alert fixed top-5 left-1/2 -translate-x-1/2 w-fit px-6 py-3 bg-green-500 text-white rounded-lg shadow-lg flex items-center gap-2 animate-fade-in">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <span>
                <%= success[0] %>
            </span>
        </div>
        <% } %>
            <div class="w-full h-screen flex items-start px-20 py-20">
                <div class="w-[25%] flex h-screen flex-col items-start">
                    <div class="flex items-center gap-2">
                        <h3>sort by</h3>
                        <form action="/shop">
                            <select class="border-[1px] px-2 py-1" name="sortby" id="">
                                <option value="popular">Popular</option>
                                <option value="newest">Newest</option>
                            </select>
                        </form>
                    </div>
                    <div class="flex flex-col mt-20">
                        <a class="block w-fit mb-2" href="">New Collection</a>
                        <a class="block w-fit mb-2" href="">All Products</a>
                        <a class="block w-fit mb-2" href="">Discounted Products</a>
                    </div>
                    <div class="mt-32">
                        <a class="block w-fit mb-2" href="">Filter by :</a>
                        <a class="block w-fit mb-2" href="">Availability</a>
                        <a class="block w-fit mb-2" href="">Discount</a>
                    </div>
                </div>
                <div class="w-[75%] flex flex-col gap-5 h-screen">
                    <div class="flex flex-wrap items-start gap-5">
                        <% if (typeof product !=="undefined" && product.length> 0) { %>
                            <% product.forEach(function(product){ %>
                                <div class="w-60">
                                    <div class="w-full h-52 flex items-center justify-center bg-[<%= product.bgcolor %>]"
                                        style="background-color:<%- product.bgColor %>;">
                                        <img class="h-[12rem]"
                                            src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" alt="">
                                    </div>
                                    <div class="flex justify-between items-center px-4 py-4 text-[<%= product.textcolor %>]"
                                        style="background-color:<%= product.panelColor %>; color:<%= product.textColor %>;">
                                        <div>
                                            <h3>
                                                <%= product.name %>
                                            </h3>
                                            <h4>â‚¹ <%= product.price %>
                                            </h4>
                                        </div>
                                        <a class="w-7 h-7 flex items-center justify-center rounded-full bg-white"
                                            href="/addtocart/<%= product._id %>">
                                            <i class="ri-add-line"></i>
                                        </a>
                                    </div>
                                </div>
                                <% }) %>
                                    <% } else { %>
                                        <p class="text-gray-500 text-center w-full mt-10">No products available.</p>
                                        <% } %>
                    </div>
                </div>
            </div>
            <%- include('./partials/footer') %>
                <script>
                    setTimeout(() => {
                        document.querySelectorAll('.alert').forEach(el => {
                            el.classList.remove('animate-fade-in');
                            el.classList.add('animate-fade-out');
                            setTimeout(() => el.remove(), 400);
                        });
                    }, 2500);
                </script>